{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formElem = document.querySelector('.form');\nconst btnSearch = document.querySelector('.btn-search');\nconst imageList = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\n\nfunction showErrorToast(message) {\n  iziToast.show({\n    message,\n    image: '../img/bi_x-octagon.svg',\n    messageColor: '#FFF',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    maxWidth: '472px',\n    imageWidth: 24,\n  });\n}\n\nfunction resetImageList(markup) {\n  imageList.innerHTML = markup;\n}\n\nfunction toggle(element, visible) {\n  if (visible) {\n    element.classList.remove('hidden');\n  } else {\n    element.classList.add('hidden');\n  }\n}\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  caption: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nformElem.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = event.target.elements.query.value.trim();\n\n  resetImageList('');\n  toggle(loader, true);\n  searchImg(query)\n    .then(data => {\n      if (data.hits.length) {\n        const markup = imagesTemplate(data.hits);\n        resetImageList(markup);\n        lightbox.refresh();\n      } else {\n        showErrorToast(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n    })\n    .catch(() => {\n      showErrorToast('Sorry, something went wrong. Try one more time.');\n    })\n    .finally(() => {\n      toggle(loader, false);\n    });\n});\n\nfunction searchImg(query) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '44022790-a27ad4929b92e52df6d2f0bb4',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n  const url = `${BASE_URL}?${params}`;\n\n  return fetch(url).then(res => res.json());\n}\n\nfunction imageTemplate(image) {\n  return `<li>\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img \n        class=\"gallery-img\" \n        src=\"${image.webformatURL}\" \n        data-source=\"${image.largeImageURL}\"\n        alt=\"${image.tags}\"></a>\n    <div class=\"information\">\n     <div>\n        <h3>Likes</h3>\n        <p>${image.likes}</p>\n     </div>\n      <div>\n          <h3>Views</h3>\n          <p>${image.views}</p>\n      </div>   \n      <div>\n        <h3>Comments</h3>\n        <p>${image.comments}</p>\n      </div>   \n      <div>\n        <h3>Downloads</h3>\n        <p>${image.downloads}</p>\n      </div>\n    </div>\n  </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n"],"names":["formElem","imageList","loader","showErrorToast","message","iziToast","resetImageList","markup","toggle","element","visible","lightbox","SimpleLightbox","event","query","searchImg","data","imagesTemplate","BASE_URL","params","url","res","imageTemplate","image","arr"],"mappings":"6vBAMA,MAAMA,EAAW,SAAS,cAAc,OAAO,EAC7B,SAAS,cAAc,aAAa,EACtD,MAAMC,EAAY,SAAS,cAAc,eAAe,EAClDC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,EAAeC,EAAS,CAC/BC,EAAS,KAAK,CACZ,QAAAD,EACA,MAAO,0BACP,aAAc,OACd,SAAU,WACV,gBAAiB,UACjB,SAAU,QACV,WAAY,EAChB,CAAG,CACH,CAEA,SAASE,EAAeC,EAAQ,CAC9BN,EAAU,UAAYM,CACxB,CAEA,SAASC,EAAOC,EAASC,EAAS,CAC5BA,EACFD,EAAQ,UAAU,OAAO,QAAQ,EAEjCA,EAAQ,UAAU,IAAI,QAAQ,CAElC,CAEA,MAAME,EAAW,IAAIC,EAAe,kBAAmB,CACrD,QAAS,GACT,aAAc,MACd,aAAc,GAChB,CAAC,EAEDZ,EAAS,iBAAiB,SAAUa,GAAS,CAC3CA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,OAAO,SAAS,MAAM,MAAM,OAEhDP,EAAe,EAAE,EACjBE,EAAON,EAAQ,EAAI,EACnBa,EAAUD,CAAK,EACZ,KAAKE,GAAQ,CACZ,GAAIA,EAAK,KAAK,OAAQ,CACpB,MAAMT,EAASU,EAAeD,EAAK,IAAI,EACvCV,EAAeC,CAAM,EACrBI,EAAS,QAAO,CACxB,MACQR,EACE,0EACV,CAEA,CAAK,EACA,MAAM,IAAM,CACXA,EAAe,iDAAiD,CACtE,CAAK,EACA,QAAQ,IAAM,CACbK,EAAON,EAAQ,EAAK,CAC1B,CAAK,CACL,CAAC,EAED,SAASa,EAAUD,EAAO,CACxB,MAAMI,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACKM,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GAEjC,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAC1C,CAEA,SAASC,EAAcC,EAAO,CAC5B,MAAO;AAAA,oCAC2BA,EAAM,aAAa;AAAA;AAAA;AAAA,eAGxCA,EAAM,YAAY;AAAA,uBACVA,EAAM,aAAa;AAAA,eAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,aAIZA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,eAITA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,aAIbA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,aAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,QAI5B,CAEA,SAASN,EAAeO,EAAK,CAC3B,OAAOA,EAAI,IAAIF,CAAa,EAAE,KAAK,EAAE,CACvC"}